{"ast":null,"code":"import _classCallCheck from\"C:/Users/callo/OneDrive/Desktop/PROFESSIONAL/Devops_FullStack Internship/Online_learning/week 3/Javascript/React-App-SmartBrain-FrontEnd-Project/facerecognitionbrain/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/callo/OneDrive/Desktop/PROFESSIONAL/Devops_FullStack Internship/Online_learning/week 3/Javascript/React-App-SmartBrain-FrontEnd-Project/facerecognitionbrain/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/callo/OneDrive/Desktop/PROFESSIONAL/Devops_FullStack Internship/Online_learning/week 3/Javascript/React-App-SmartBrain-FrontEnd-Project/facerecognitionbrain/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/callo/OneDrive/Desktop/PROFESSIONAL/Devops_FullStack Internship/Online_learning/week 3/Javascript/React-App-SmartBrain-FrontEnd-Project/facerecognitionbrain/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{Component}from'react';import Particles from'react-particles-js';//import Clarifai from 'clarifai';\nimport FaceRecognition from'./components/FaceRecognition/FaceRecognition';import'./App.css';import Navigation from'./components/Navigation/Navigation';import Register from'./components/Register/Register';import SignIn from'./components/SignIn/SignIn';import Logo from'./components/Logo/Logo';import ImageLinkForm from'./components/ImageLinkForm/ImageLinkForm';import Rank from'./components/Rank/Rank';// const Clarifai = require('clarifai');\n// const app = new Clarifai.App({\n// apiKey: 'be52b48c98db41f8929d9dd47e10a291'\n// });\n//const app = new Clarifai.App({apiKey: 'be52b48c98db41f8929d9dd47e10a291'});\nvar particlesOptions={particles:{value:30,density:{enabled:true,value_area:800}}};//to initialize the state for different users\nvar initialState={input:'',imageUrl:'',box:{},route:'signin',isSignedIn:false,user:{id:'',name:'',email:' ',entries:0,joined:''}};var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);//to get information from Detect button\nfunction App(){var _this;_classCallCheck(this,App);_this=_super.call(this);_this.loadUser=function(data){_this.setState({user:{id:data.id,name:data.name,email:data.email,entries:data.entries,joined:data.joined}});};_this.calculateFaceLocation=function(data){var clarifaiFace=data.outputs[0].data.regions[0].region_info.bounding_box;var image=document.getElementById('inputImage');var width=Number(image.width);var height=Number(image.height);console.log(width,height);return{leftCol:clarifaiFace.left_col*width,topRow:clarifaiFace.top_row*height,rightCol:width-clarifaiFace.right_col*width,bottomRow:height-clarifaiFace.bottom_row*height};};_this.displayFaceBox=function(box){console.log(box);_this.setState({box:box});};_this.onInputChange=function(event){_this.setState({input:event.target.value});//to get value from input\n};_this.onButtonSubmit=function(){_this.setState({imageurl:_this.state.input});fetch('http://localhost:3000/imageurl',{method:'post',//this is 'get' by default\nheaders:{'Content-Type':'application/json'},body:JSON.stringify({input:_this.state.input})}).then(function(response){return response.json();})// app.models.predict(\n// Clarifai.FACE_DETECT_MODEL, \n// this.state.input)\n.then(function(response){if(response){fetch('http://localhost:3000/image',{method:'put',//this is 'get' by default\nheaders:{'Content-Type':'application/json'},body:JSON.stringify({id:_this.state.user.id})}).then(function(response){return response.json();}).then(function(count){_this.setState(Object.assign(_this.state.user,{entries:count}));}).catch(console.log);//for error handling\n}_this.displayFaceBox(_this.calculateFaceLocation(response));})// do something with response\n.catch(function(err){return console.log(err);});// there was an error\n};_this.onRouteChange=function(route){if(route==='signout'){_this.setState(initialState);}else if(route==='home'){_this.setState({isSignedIn:true});}_this.setState({route:route});//changes route to home when sign in and sign out\n};_this.state=initialState;return _this;}_createClass(App,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Particles,{className:\"particles\",params:particlesOptions}),/*#__PURE__*/_jsx(Navigation,{isSignedIn:this.state.isSignedIn,onRouteChange:this.onRouteChange}),this.state.route==='home'?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Logo,{}),/*#__PURE__*/_jsx(Rank,{name:this.state.user.name,entries:this.state.user.entries}),/*#__PURE__*/_jsx(ImageLinkForm,{onInputChange:this.onInputChange,onButtonSubmit:this.onButtonSubmit}),/*#__PURE__*/_jsx(FaceRecognition,{box:this.state.box,imageUrl:this.state.input})]}):this.state.route==='signin'?/*#__PURE__*/_jsx(SignIn,{loadUser:this.loadUser,onRouteChange:this.onRouteChange}):/*#__PURE__*/_jsx(Register,{loadUser:this.loadUser,onRouteChange:this.onRouteChange})// a function to redirect when signed in\n]});}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["C:/Users/callo/OneDrive/Desktop/PROFESSIONAL/Devops_FullStack Internship/Online_learning/week 3/Javascript/React-App-SmartBrain-FrontEnd-Project/facerecognitionbrain/src/App.js"],"names":["React","Component","Particles","FaceRecognition","Navigation","Register","SignIn","Logo","ImageLinkForm","Rank","particlesOptions","particles","value","density","enabled","value_area","initialState","input","imageUrl","box","route","isSignedIn","user","id","name","email","entries","joined","App","loadUser","data","setState","calculateFaceLocation","clarifaiFace","outputs","regions","region_info","bounding_box","image","document","getElementById","width","Number","height","console","log","leftCol","left_col","topRow","top_row","rightCol","right_col","bottomRow","bottom_row","displayFaceBox","onInputChange","event","target","onButtonSubmit","imageurl","state","fetch","method","headers","body","JSON","stringify","then","response","json","count","Object","assign","catch","err","onRouteChange"],"mappings":"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","sourcesContent":["import React, { Component} from 'react';\nimport Particles from 'react-particles-js';\n//import Clarifai from 'clarifai';\nimport FaceRecognition from './components/FaceRecognition/FaceRecognition';\nimport './App.css';\nimport Navigation from './components/Navigation/Navigation';\nimport Register from './components/Register/Register';\nimport SignIn from './components/SignIn/SignIn';\nimport Logo from './components/Logo/Logo';\nimport ImageLinkForm from './components/ImageLinkForm/ImageLinkForm';\nimport Rank from './components/Rank/Rank';\n\n// const Clarifai = require('clarifai');\n// const app = new Clarifai.App({\n// apiKey: 'be52b48c98db41f8929d9dd47e10a291'\n// });\n//const app = new Clarifai.App({apiKey: 'be52b48c98db41f8929d9dd47e10a291'});\n\nconst particlesOptions = {\n        particles: {\n          value:30,\n          density: {\n            enabled:true,\n            value_area: 800\n          }\n              }\n            }\n//to initialize the state for different users\nconst initialState = {\n      input: '',\n      imageUrl: '',\n      box: {},\n      route: 'signin',\n      isSignedIn: false,\n      user:{\n          id: '',\n          name:'',\n          email: ' ',\n          entries: 0,\n          joined: ''\n      }\n    }\n\n\nclass App extends Component {\n  //to get information from Detect button\n  constructor(){\n    super();\n    this.state= initialState;\n  }\n\n  loadUser=(data)=> {\n    this.setState({user:{\n          id: data.id,\n          name: data.name,\n          email: data.email,\n          entries: data.entries,\n          joined: data.joined\n      }})\n  }\n\n  /*componentDidMount() { //for testing the connection between frontend and backend\n    fetch('http://localhost:3000')\n    .then(response => response.json())\n    .then(console.log) \n} */\n\n  calculateFaceLocation= (data)=> {\n    const clarifaiFace = data.outputs[0].data.regions[0].region_info.bounding_box;\n    const image = document.getElementById('inputImage');\n    const width = Number(image.width);\n    const height = Number(image.height);\n    console.log(width, height);\n    return {\n      leftCol: clarifaiFace.left_col * width,\n      topRow: clarifaiFace.top_row * height,\n      rightCol: width - (clarifaiFace.right_col * width),\n      bottomRow: height - (clarifaiFace.bottom_row * height)\n    }\n  }\n  displayFaceBox=(box)=> {\n    console.log(box);\n    this.setState({box: box});\n  }\n\n  onInputChange = (event)=> {\n    this.setState({input: event.target.value}); //to get value from input\n  }\n\n  onButtonSubmit = ()=> {\n    this.setState({imageurl:this.state.input})\n      fetch('http://localhost:3000/imageurl' , {\n          method: 'post', //this is 'get' by default\n          headers: {'Content-Type': 'application/json'},\n          body:JSON.stringify({\n          input: this.state.input\n        }) } )\n      .then(response=> response.json())\n\n    // app.models.predict(\n    // Clarifai.FACE_DETECT_MODEL, \n    // this.state.input)\n    .then(response => {\n      if (response) {\n        fetch('http://localhost:3000/image' , {\n          method: 'put', //this is 'get' by default\n          headers: {'Content-Type': 'application/json'},\n          body:JSON.stringify({\n          id: this.state.user.id\n        }) } )\n        .then (response => response.json())\n        .then(count => {\n          this.setState(Object.assign(this.state.user, {entries:count}))\n        })\n        .catch(console.log) //for error handling\n      }\n    this.displayFaceBox(this.calculateFaceLocation(response))}) \n   // do something with response\n  .catch(err=> console.log(err)); // there was an error\n  }\n\n  onRouteChange = (route)=> {\n    if(route === 'signout') { this.setState(initialState)}\n    else if(route==='home') {this.setState({isSignedIn:true})}\n    this.setState({route: route}); //changes route to home when sign in and sign out\n  }\nrender() {\n  return (\n    <div className=\"App\">\n          <Particles className= 'particles' \n          params = {particlesOptions}/>\n        <Navigation isSignedIn= {this.state.isSignedIn} \n        onRouteChange= {this.onRouteChange}  />\n        {this.state.route=== 'home'\n          ? <div>\n          <Logo/> \n          <Rank name= {this.state.user.name} entries={this.state.user.entries}/>\n          <ImageLinkForm \n          onInputChange={this.onInputChange} \n          onButtonSubmit={this.onButtonSubmit}/>\n          <FaceRecognition box ={this.state.box} imageUrl={this.state.input} />\n          </div>\n          : (this.state.route === 'signin' \n          ? <SignIn loadUser={this.loadUser} onRouteChange = {this.onRouteChange}/>\n          : <Register loadUser= {this.loadUser} onRouteChange = {this.onRouteChange}/>\n          ) // a function to redirect when signed in\n        }\n    </div>\n    );\n  }\n}\nexport default App;"]},"metadata":{},"sourceType":"module"}